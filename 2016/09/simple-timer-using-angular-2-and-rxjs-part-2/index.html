<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="This is Part 2 for creating a ‘Simple Timer using Angular 2 &amp;amp; RxJS’.DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the c">
<meta property="og:type" content="article">
<meta property="og:title" content="Simple Timer using Angular 2 and RxJS - part 2">
<meta property="og:url" content="https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/index.html">
<meta property="og:site_name" content="DMKCode">
<meta property="og:description" content="This is Part 2 for creating a ‘Simple Timer using Angular 2 &amp;amp; RxJS’.DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the c">
<meta property="og:image" content="https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/Simple_TImer_Part2.png">
<meta property="og:updated_time" content="2016-10-22T21:03:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simple Timer using Angular 2 and RxJS - part 2">
<meta name="twitter:description" content="This is Part 2 for creating a ‘Simple Timer using Angular 2 &amp;amp; RxJS’.DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the c">
<meta name="twitter:image" content="https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/Simple_TImer_Part2.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicons/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Simple Timer using Angular 2 and RxJS - part 2</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2016/10/dockerize-dev-environment/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2016/08/simple-timer-using-angular-2-and-rxjs/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&text=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&is_video=false&description=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Simple Timer using Angular 2 and RxJS - part 2&body=Check out this article: https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&name=Simple Timer using Angular 2 and RxJS - part 2&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Service"><span class="toc-number">1.</span> <span class="toc-text">The Service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Buttons-Component"><span class="toc-number">2.</span> <span class="toc-text">The Buttons Component</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timer-Component-Changes"><span class="toc-number">3.</span> <span class="toc-text">Timer Component Changes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Run-It"><span class="toc-number">4.</span> <span class="toc-text">Run It</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Simple Timer using Angular 2 and RxJS - part 2
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">DMKCode</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-09-15T15:22:56.000Z" itemprop="datePublished">15-09-2016</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Angular2/">Angular2</a>, <a class="tag-link" href="/tags/RxJS/">RxJS</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote><p>This is Part 2 for creating a ‘Simple Timer using Angular 2 &amp; RxJS’.<br><br><br>DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the comments, I’m always looking to learn.</p>
</blockquote>
<p>In this post, I’m going to extend the simple timer we created in <a href="https://dmkcode.com/2016/08/simple-timer-using-angular-2-and-rxjs/">part 1</a> by adding another component which will start, pause and stop the timer.</p>
<p>We will start by grabbing the source from the previous part on my <a href="https://github.com/DMKCode/timer_angular2_rxjs" target="_blank" rel="external">Github</a>.<br>We will pick it up from there.</p>
<h2 id="The-Service"><a href="#The-Service" class="headerlink" title="The Service"></a>The Service</h2><p>The service is introduced to facilitate communication between the components. There are many ways to do this as describe in the <a href="https://angular.io/docs/ts/latest/cookbook/component-communication.html" target="_blank" rel="external">Angular Docs</a> and here, the service way was chosen for communication.</p>
<p>The following code makes up our timer service.</p>
<script src="//gist.github.com/5e0f3371981735e40da6accf918defb7.js?file=timer.service.ts"></script>
<p>We start off by importing Injectable and EventEmitter from @angular/core. We use Injectable to annotate our class to make it injectable into our buttons component which will be shown shortly. We use EventEmitter to emit custom events.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable, EventEmitter &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> TimerService &#123;</span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the class we create the variables to store booleans for indicating the current state of the timer when a particular button is pressed i.e. play, pause, stop. We also create the playPauseStop$ variable as the EventEmitter which will emit the custom event. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> play: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> pause: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> stop: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">public</span> playPauseStop$ = <span class="keyword">new</span> EventEmitter();</span><br></pre></td></tr></table></figure>
<p>Next we have the functions, playTimer(), pauseTimer() and stopTimer(). The functions are quite similar and simple. They simply set the play, pause and stop variables and then emit at object containing the relevant action as key value pair.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> playTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.play = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">this</span>.pause = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.stop = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.playPauseStop$.emit(&#123;</span><br><span class="line">        play: <span class="keyword">this</span>.play</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> pauseTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.play = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.pause = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">this</span>.stop = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.playPauseStop$.emit(&#123;</span><br><span class="line">        pause: <span class="keyword">this</span>.pause</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> stopTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.play = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.pause = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.stop = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.playPauseStop$.emit(&#123;</span><br><span class="line">        stop: <span class="keyword">this</span>.stop</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And to make our service available for dependency injection, we import in the app module and add it to the providers array.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="keyword">import</span> &#123; TimerService &#125; <span class="keyword">from</span> <span class="string">'../services/timer.service'</span>;</span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">    ...,</span><br><span class="line">    providers: [ TimerService ],</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="The-Buttons-Component"><a href="#The-Buttons-Component" class="headerlink" title="The Buttons Component"></a>The Buttons Component</h2><p>The following code makes up our buttons component.</p>
<script src="//gist.github.com/d1364191643e1bf13860485705c49f4b.js?file=buttons.component.ts"></script>
<p>The buttons component is created by following the same procedure as with the timer component in part 1 with a couple of slight deferences though.</p>
<p>We start off by importing Component, OnInit, OnDestroy from @angular/core. We also import our service which as mentioned earlier, we will use for communication with the timer.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit, OnDestroy &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TimerService &#125; <span class="keyword">from</span> <span class="string">'../services/timer.service'</span>;</span><br></pre></td></tr></table></figure>
<p>We implement the OnInit and OnDestroy lifecycle hooks.<br>The variable playPauseStopUnsubscribe is declared to store the subcription to the timer service custom EventEmitter and the variable play to store the state of play.<br>We then Inject, the timer service into the class using the constructor and storing it in the variable timerService.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ButtonsComponent <span class="keyword">implements</span> OnInit, OnDestroy &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> playPauseStopUnsubscribe: <span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">private</span> play: <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> timerService: TimerService</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">.....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the ngOnInit() function, we suscribe the to the timer service EventEmitter - playPauseStop$ and pass a callback to execute everytime an event is emitted. The callback invokes the setPlay() passing in the object from the EventEmitter. In the ngOnDestroy() function, we call the unsubscribe function on the playPauseStopUnsubscribe to unsubscribe from timer service EventEmitter.</p>
<p>The setPlay() function simply checks if the object has play on it and if so, set the play variable in the component.</p>
<p>The playTimer() function is called when the play button is pressed which calls the playTimer method in the service.<br>The pauseTimer() function is called when the pause button is pressed which calls the pauseTimer method in the service.<br>The stopTimer() function is called when the stop button is pressed which calls the stopTimer method in the service.  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.playPauseStopUnsubscribe = <span class="keyword">this</span>.timerService.playPauseStop$.subscribe(<span class="function">(<span class="params">res: <span class="built_in">any</span></span>) =&gt;</span> <span class="keyword">this</span>.setPlay(res));       </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ngOnDestroy() &#123;</span><br><span class="line">    <span class="keyword">this</span>.playPauseStopUnsubscribe.unsubscribe();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> setPlay(res: <span class="built_in">any</span>) &#123;</span><br><span class="line">    (res.play) ? <span class="keyword">this</span>.play = <span class="literal">true</span> : <span class="keyword">this</span>.play = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">playTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerService.playTimer();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pauseTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerService.pauseTimer();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stopTimer() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerService.stopTimer();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We then add the buttons tag to ‘app.component.html’<br><figure class="highlight html"><figcaption><span>app.component.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">buttons</span>&gt;</span><span class="tag">&lt;/<span class="name">buttons</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>and import, and add to the declarations array in ‘app.module.ts’</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="keyword">import</span> &#123; ButtonsComponent &#125; <span class="keyword">from</span> <span class="string">"./buttons.component"</span>;</span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">    ...,</span><br><span class="line">    declarations: [</span><br><span class="line">        ...</span><br><span class="line">        TimerComponent,</span><br><span class="line">        ...   </span><br><span class="line">    ]</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Timer-Component-Changes"><a href="#Timer-Component-Changes" class="headerlink" title="Timer Component Changes"></a>Timer Component Changes</h2><p>Finally we make some changes to the timer component to subscribe to use the service to communication.<br>Comments in the code below describe the changes.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line"><span class="comment">// import the timer service for communication</span></span><br><span class="line"><span class="keyword">import</span> &#123; TimerService &#125; <span class="keyword">from</span> <span class="string">'../services/timer.service'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> TimerComponent <span class="keyword">implements</span> OnInit, OnDestroy &#123;</span><br><span class="line">    <span class="comment">// variable to subscribe to the timer service EventEmitter</span></span><br><span class="line">    <span class="keyword">private</span> playPauseStopUnsubscribe: <span class="built_in">any</span>;</span><br><span class="line">    ....</span><br><span class="line">    <span class="comment">// start variable to tell the timer when to start</span></span><br><span class="line">    start = <span class="number">0</span>;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// inject the timer service</span></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> timerService: TimerService</span>) &#123;        </span><br><span class="line">    &#125;</span><br><span class="line">    ngOnInit() &#123;</span><br><span class="line">        <span class="comment">// subscribe to the playPauseStop$ EventEmitter in the timer service </span></span><br><span class="line">        <span class="keyword">this</span>.playPauseStopUnsubscribe = <span class="keyword">this</span>.timerService.playPauseStop$.subscribe(<span class="function">(<span class="params">res: <span class="built_in">any</span></span>) =&gt;</span> <span class="keyword">this</span>.playPauseStop(res));</span><br><span class="line">    &#125;</span><br><span class="line">    ngOnDestroy() &#123;</span><br><span class="line">        <span class="comment">// unsubscribe from the EventEmitter when the component is destroyed</span></span><br><span class="line">        <span class="keyword">this</span>.playPauseStopUnsubscribe.unsubscribe();;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> playPauseStop(res: <span class="built_in">any</span>) &#123;</span><br><span class="line">        <span class="comment">// check the object passed by the EventEmitter </span></span><br><span class="line">        <span class="comment">// and call relevant method based on the action</span></span><br><span class="line">        <span class="keyword">if</span>(res.play) &#123;</span><br><span class="line">            <span class="keyword">this</span>.startTimer();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(res.pause) &#123;</span><br><span class="line">            <span class="keyword">this</span>.pauseTimer();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.stop) &#123;</span><br><span class="line">            <span class="keyword">this</span>.stopTimer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> startTimer() &#123;</span><br><span class="line">        ....</span><br><span class="line">        <span class="keyword">this</span>.sub = timer.subscribe(</span><br><span class="line">            <span class="function"><span class="params">t</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// use the start variable to begin timer</span></span><br><span class="line">                <span class="keyword">this</span>.ticks = <span class="keyword">this</span>.start + t;</span><br><span class="line">                ....</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set the start variable and unsubscribe from the timer observable</span></span><br><span class="line">    <span class="comment">// will be used to start timer</span></span><br><span class="line">    <span class="keyword">private</span> pauseTimer() &#123;</span><br><span class="line">        <span class="keyword">this</span>.start = ++<span class="keyword">this</span>.ticks;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.sub) <span class="keyword">this</span>.sub.unsubscribe();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//re-set all variables and unsubscribe from the timer observable</span></span><br><span class="line">    <span class="keyword">private</span> stopTimer() &#123;</span><br><span class="line">        <span class="keyword">this</span>.start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.ticks = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.minutesDisplay = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.hoursDisplay = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.secondsDisplay = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.sub) <span class="keyword">this</span>.sub.unsubscribe();</span><br><span class="line">    &#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Run-It"><a href="#Run-It" class="headerlink" title="Run It"></a>Run It</h2><p>To check out the new timer in action, just run the command</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br><span class="line">$ npm run start</span><br></pre></td></tr></table></figure>
<p>Go to <a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a> or <a href="http://localhost:8080/webpack-dev-server/" target="_blank" rel="external">http://localhost:8080/webpack-dev-server/</a> to see the timer!</p>
<img src="/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/Simple_TImer_Part2.png" alt="100% simple timer" title="100% simple timer">
<p><br><br>The complete source code can be found on my <a href="https://github.com/DMKCode/timer_angular2_rxjs-2" target="_blank" rel="external">Github</a>. </p>
<p>Thanks for reading!</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Service"><span class="toc-number">1.</span> <span class="toc-text">The Service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Buttons-Component"><span class="toc-number">2.</span> <span class="toc-text">The Buttons Component</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timer-Component-Changes"><span class="toc-number">3.</span> <span class="toc-text">Timer Component Changes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Run-It"><span class="toc-number">4.</span> <span class="toc-text">Run It</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&text=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&is_video=false&description=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Simple Timer using Angular 2 and RxJS - part 2&body=Check out this article: https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&title=Simple Timer using Angular 2 and RxJS - part 2"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://dmkcode.com/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/&name=Simple Timer using Angular 2 and RxJS - part 2&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 David Kananda
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'DMKCode';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


