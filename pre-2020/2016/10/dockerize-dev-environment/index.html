<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the comments, I’m always looking to learn.

Docker is a containerization plat">
<meta property="og:type" content="article">
<meta property="og:title" content="Dockerizing My Dev Environment">
<meta property="og:url" content="https://dmkcode.com/2016/10/dockerize-dev-environment/index.html">
<meta property="og:site_name" content="DMKCode">
<meta property="og:description" content="DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the comments, I’m always looking to learn.

Docker is a containerization plat">
<meta property="og:image" content="https://dmkcode.com/2016/10/dockerize-dev-environment/node_express.png">
<meta property="og:updated_time" content="2016-10-22T21:20:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dockerizing My Dev Environment">
<meta name="twitter:description" content="DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the comments, I’m always looking to learn.

Docker is a containerization plat">
<meta name="twitter:image" content="https://dmkcode.com/2016/10/dockerize-dev-environment/node_express.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicons/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Dockerizing My Dev Environment</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/08/redux-jest-snapshot/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2016/09/simple-timer-using-angular-2-and-rxjs-part-2/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://dmkcode.com/2016/10/dockerize-dev-environment/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&text=Dockerizing My Dev Environment"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&is_video=false&description=Dockerizing My Dev Environment"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Dockerizing My Dev Environment&body=Check out this article: https://dmkcode.com/2016/10/dockerize-dev-environment/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&name=Dockerizing My Dev Environment&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Dockerfile"><span class="toc-number">1.</span> <span class="toc-text">The Dockerfile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-docker-compose-yml"><span class="toc-number">2.</span> <span class="toc-text">The docker-compose.yml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Run-It"><span class="toc-number">3.</span> <span class="toc-text">Run It</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Dockerizing My Dev Environment
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">DMKCode</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-10-01T22:48:57.000Z" itemprop="datePublished">01-10-2016</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Docker/">Docker</a>, <a class="tag-link" href="/tags/Express/">Express</a>, <a class="tag-link" href="/tags/Node-js/">Node.js</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote><p>DISCLAIMER: My solution may not everybody’s cup of tea. If you have a better and more efficient solution, give me shout in the comments, I’m always looking to learn.</p>
</blockquote>
<p><a href="https://www.docker.com/" target="_blank" rel="external">Docker</a> is a containerization platform that simplifies building, shipping and running apps.</p>
<p>As a developer, having a consistent environmment removes a lot of the pain associated with having to make sure the computers you use have the same version of software such as frameworks e.g. node. </p>
<p>There many more benefits docker offers and, environment consistency and the ability to have other developers run your app without having to configure the environment (apart from having docker installed) is what this post is about. </p>
<p>I’m going to demonstrate how to dockerize a Node (Express) app for development.</p>
<p>I’m going to assume you have: </p>
<ul>
<li><p>An app generated using <a href="https://expressjs.com/en/starter/generator.html" target="_blank" rel="external">express-generator</a><br>To generate:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express-generator -g</span><br><span class="line">$ express dockerize_dev_env --hbs</span><br></pre></td></tr></table></figure>
</li>
<li><p>Docker installed on your machine: <a href="https://www.docker.com/products/docker" target="_blank" rel="external">Docker for Mac or Windows</a></p>
</li>
</ul>
<p>With our app ready and running using node on the local machine, we can now change it such that our app should run in a docker container with node and anything else we need for development installed on it. This means that we could run this container with docker on another machine without needing to have node on installed on it.</p>
<h2 id="The-Dockerfile"><a href="#The-Dockerfile" class="headerlink" title="The Dockerfile"></a>The Dockerfile</h2><p>We first create the Dockerfile at the root of the project generated (above).<br>This file is what is used to build the node image for our environment.<br>Read more about the commands used in the file <a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="external">here</a>.</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:latest</span><br><span class="line"></span><br><span class="line"><span class="keyword">MAINTAINER</span> DMKCode</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> NODE_ENV=development </span><br><span class="line"><span class="keyword">ENV</span> PORT=<span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /src</span><br><span class="line"></span><span class="keyword">WORKDIR</span><span class="bash"> /src</span><br><span class="line"></span></span><br><span class="line"><span class="comment"># use nodemon for development</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install --global nodemon</span><br><span class="line"></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span><br><span class="line"></span></span><br><span class="line"><span class="comment"># we do this because when we create the container using this image, node_modules from npm install is wiped out as the volume is mounted when creating the container.</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mv /src/node_modules /node_modules</span><br><span class="line"></span></span><br><span class="line"><span class="keyword">EXPOSE</span> $PORT</span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"npm"</span>, <span class="string">"start"</span>]</span></span><br></pre></td></tr></table></figure>
<p>Essentially what the file does is pull in the latest node image to use as the base image, then sets who the maintainer of the image is i.e. DMKCode.<br>The file then defines two environment variables which will be available to the container created from the image for the app in the container to use.<br>The file then copies the source code from the root folder locally into the image in a folder /src which is also then set as the working directory.<br>The file then installs <a href="https://github.com/remy/nodemon" target="_blank" rel="external">nodemon</a> (watches files and restarts the application if there is a change) globally in the image, then installs the dependencies defined in package.json and then moves the node_modules folder.<br>Finally, the file then specifies the default executing command for the container created from the image.</p>
<p>We then create the <a href="https://docs.docker.com/compose/" target="_blank" rel="external">docker-compose.yml</a> which is particularly useful for multi-container Docker applications. We will use it here for linking the local source to a volume which will be mounted on a container, and naming our container and image without using the command line. </p>
<h2 id="The-docker-compose-yml"><a href="#The-docker-compose-yml" class="headerlink" title="The docker-compose.yml"></a>The docker-compose.yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  node_express:</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">node-express</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">dmkcode/node-express</span></span><br><span class="line"><span class="attr">    build:</span> </span><br><span class="line"><span class="attr">      context:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">    command:</span> <span class="string">nodemon</span> <span class="bullet">--debug=5858</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">.:/src</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"8000:3000"</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"5858:5858"</span></span><br></pre></td></tr></table></figure>
<p>The file defines a service called node_express from the image built from the Dockerfile in the current directory.<br>The file, for develpment overrides the command specified in the Dockerfile which enables remote debugging provided by node. However, the image on its own will not have this enabled which is suitable for production. For more about live debugging, check out the <a href="https://blog.docker.com/2016/07/live-debugging-docker/" target="_blank" rel="external">blog</a> by <a href="https://blog.docker.com/author/aanand/" target="_blank" rel="external">Aanand Prasad</a>.<br>The file then mounts the current directory as a volume /src overwriting anything in it. This means the image will not have to be rebuilt every time there is a change to the source code.<br>The file then maps port 3000 in the container to port 8000 externally i.e. machine localhost and port 5858 in the container to port 5858 externally i.e. machine localhost for connecting to the remote debugger.</p>
<h2 id="Run-It"><a href="#Run-It" class="headerlink" title="Run It"></a>Run It</h2><p>Check out the app by running: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose build</span><br><span class="line">$ docker-compose up</span><br></pre></td></tr></table></figure>
<p>Go to <a href="http://localhost:8000" target="_blank" rel="external">http://localhost:8000</a> to see the app!</p>
<img src="/2016/10/dockerize-dev-environment/node_express.png" alt="100% node app" title="100% node app">
<p><br><br>If you were to make changes to the source code, the app in the container will be automatically restarted by nodemon meaning no need to rebuild the image. </p>
<p>The complete source code can be found on my <a href="https://github.com/DMKCode/dockerize_dev_env" target="_blank" rel="external">Github</a>. </p>
<p>Thanks for reading!</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Dockerfile"><span class="toc-number">1.</span> <span class="toc-text">The Dockerfile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-docker-compose-yml"><span class="toc-number">2.</span> <span class="toc-text">The docker-compose.yml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Run-It"><span class="toc-number">3.</span> <span class="toc-text">Run It</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://dmkcode.com/2016/10/dockerize-dev-environment/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&text=Dockerizing My Dev Environment"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&is_video=false&description=Dockerizing My Dev Environment"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Dockerizing My Dev Environment&body=Check out this article: https://dmkcode.com/2016/10/dockerize-dev-environment/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&title=Dockerizing My Dev Environment"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://dmkcode.com/2016/10/dockerize-dev-environment/&name=Dockerizing My Dev Environment&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 David Kananda
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/#about">About</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/#demos">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'DMKCode';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


